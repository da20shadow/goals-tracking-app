<app-page-title title="My Goals ðŸ†"></app-page-title>

<section class="my-5 flex justify-center flex-wrap gap-5">
  <ng-container *ngIf="($goalsList$|async) as goals; else noGoalsYet">

    <article [@fadeInOut] *ngFor="let goal of goals"
             [routerLink]="['/goals',goal.id]" (click)="setActiveGoal(goal.id)"
             class="hover:bg-gray-100 hover:shadow-md active:scale-[0.01] ease-in-out duration-300 p-5 cursor-pointer border bg-white dark:bg-gray-800 dark:hover:bg-gray-700 rounded shadow-sm">
      <!--Progress bar -->
      <div class="border dark:border-gray-200 bg-white dark:bg-gray-600 rounded-full">
        <div class="py-1 bg-green-800 dark:bg-green-500 text-gray-900 dark:text-gray-300 rounded-full"
             [style]="'width:'+goal.progress+'%'">{{goal.progress}}%
        </div>
      </div>
      <!--Progress bar -->

      <!--Goal title -->
      <h2 class="my-5 text-xl text-center"><mat-icon>flag</mat-icon> {{goal.title}}</h2>
      <!--Goal title -->

      <!--Goal description -->
      <p class="p-5">{{goal.description}}</p>
      <!--Goal description -->

      <!--Goal total targets -->
      <p class="py-5 text-center text-sm">
        <mat-icon class="text-xl">my_location</mat-icon>
        {{goal.totalTargets}} Goal Targets</p>
      <!--Goal total targets -->

      <!--Goal Start and due date -->
      <div class="flex flex-wrap justify-between items-center">

        <p class="flex items-center">
          <mat-icon class="text-xl" >calendar_today</mat-icon>
          <span>Start Date: {{goal.start_date| date: 'MMM d, y'}}</span>
        </p>

        <p class="flex items-center">
          <mat-icon class="text-xl" >event</mat-icon>
          <!-- TODO: remove the H:mm -->
          <span>Due Date: {{goal.due_date| date: 'MMM d, y, H:mm'}}</span>
        </p>

      </div>
      <!--Goal Start and due date -->

    </article>

  </ng-container>

  <ng-template #noGoalsYet>
    <h2 class="my-5 text-center text-2xl">No Goals Yet!</h2>
  </ng-template>

</section>


<div (click)="openAddGoalModal()"
     class="cursor-pointer py-2 px-3 border border-gray-700 bg-gray-700 hover:bg-gray-800 fixed bottom-10 right-4 rounded-md shadow-sm dark:shadow-gray-100">
  Add Goal
</div>
