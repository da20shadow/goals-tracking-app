<app-page-title title="Login"></app-page-title>
<main>
  <div class="mx-auto max-w-7xl py-6 sm:px-6 lg:px-8">

    <div class="w-full mx-auto max-w-md space-y-8">

      <!-- Login Form -->
      <form (ngSubmit)="loginHandler(loginForm)" #loginForm="ngForm"
            class="bg-white dark:bg-gray-800 mt-8 space-y-6 shadow p-10 rounded-lg
            shadow-2xl dark:shadow dark:shadow-gray-500">

        <!-- Join Now Link -->
        <div class="mt-3 text-sm">
          <span>Donâ€™t have an account yet? </span>
          <a routerLink="/register"
             [ngClass]="classes.link">Register here.</a>
        </div>

        <!-- Email Input Container-->
        <div>
          <div class="flex align-center border border-slate-600 rounded"
               [ngClass]="{ 'ok-input': (email.touched && !email.errors), 'error-input': (email.touched && email.errors) }">

            <span [ngClass]="classes.inputIcon">
              <mat-icon>mail</mat-icon>
            </span>

            <input [ngClass]="classes.input"
                   type="email"
                   name="email"
                   autocomplete="off"
                   #email="ngModel"
                   placeholder="Email"
                   required
                   pattern="^[a-z0-9_]+[@][a-z]+[.][a-z]{2,5}$"
                   ngModel
            />
          </div>
          <!-- Error/OK messages -->
          <ng-container *ngIf="email.touched">
            <span *ngIf="email.errors?.['required']"
                  class="text-sm text-red-600">
              Please enter Email!
            </span>
            <span *ngIf="email.errors?.['pattern']"
                  class="text-sm text-red-600">
              Please enter Valid Email!
            </span>
            <span class="text-sm text-green-600" *ngIf="!email.errors">Looks OK!</span>
          </ng-container>

        </div>

        <!-- Password Input Container-->
        <div>
          <div class="flex align-center border border-slate-600 rounded"
               [ngClass]="{ 'ok-input': (email.touched && !password.errors), 'error-input': (email.touched && password.errors) }">

            <span [ngClass]="classes.inputIcon">
              <mat-icon>lock</mat-icon>
            </span>

            <input [ngClass]="classes.input"
                   name="password"
                   #password="ngModel"
                   type="password"
                   placeholder="Password"
                   required
                   minlength="8"
                   ngModel
            />
          </div>
          <!-- Error/OK messages -->
          <ng-container *ngIf="email.touched">
            <span *ngIf="password.errors?.['required']"
                  class="text-sm text-red-600">
              Please enter Password!
            </span>
            <span *ngIf="password.errors?.['minlength']"
                  class="text-sm text-red-600">
              Password must be at least 8 characters long!
            </span>
            <span class="text-sm text-green-600" *ngIf="!password.errors">Looks OK!</span>
          </ng-container>

        </div>

        <!-- Login Button -->
        <div>

          <button class="w-full relative" [disabled]="loginForm.invalid" type="submit"
                  [class]="loginForm.invalid
                    ? 'btn-primary-disabled dark:btn-primary-disabled-dark'
                    : 'btn-primary dark:btn-primary-dark'">
            <span class="absolute inset-y-0 left-0 flex items-center pl-3">
              <i class="fas fa-regular fa-lock"></i>
            </span>
            Sign in
          </button>

        </div>

        <!-- Forgot password Link -->
        <div class="flex items-center justify-center text-sm">

          <a routerLink="/reset-password"
             [ngClass]="classes.link">Forgot your password?</a>

        </div>

        <hr>
        <!-- Login with Social Media -->
        <p class="text-center">Or sign in with your social network</p>
        <div class="flex justify-between gap-4">
          <button type="button" class="py-2 px-3 border hover:border-rose-600 w-full rounded">Google</button>
          <button type="button" class="py-2 px-3 border hover:border-blue-600 w-full rounded">Facebook</button>
        </div>

      </form>

      {{loginForm.value | json}}

    </div>

  </div>
</main>
