"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[155],{7155:(W,x,l)=>{l.r(x),l.d(x,{AgendaModule:()=>g});var m=l(6895),k=l(3127),A=l(797),v=l(1844),c=l(921),h=l(7340),y=l(9722),Z=l(9208),w=l(6184),C=l(431);const b=["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"];var e=l(4650),$=l(953),M=l(6814),U=l(4359),N=l(1645),O=l(6194);const F=["calendarView"];function J(s,n){if(1&s&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&s){const t=n.ngIf;e.xp6(1),e.hij(" Today(",t.length,") ")}}function q(s,n){1&s&&(e.TgZ(0,"span",29),e._uU(1,"Today(0)"),e.qZA())}function L(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addNewTask())}),e._uU(1," + Add Task "),e.qZA()}}const f=function(s){return["/tasks",s]};function I(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"li",32)(1,"p",33)(2,"span",34),e.NdJ("click",function(){const r=e.CHM(t).$implicit,i=e.oxw(2);return e.KtG(i.openViewTaskModal(r))}),e._uU(3),e.qZA(),e.TgZ(4,"span",35),e._uU(5),e.qZA()(),e.TgZ(6,"span",36),e._uU(7),e.ALo(8,"date"),e.ALo(9,"date"),e.qZA()()}if(2&s){const t=n.$implicit;e.xp6(3),e.Oqu(t.title),e.xp6(1),e.Q6J("routerLink",e.VKq(11,f,t.id)),e.xp6(1),e.Oqu(t.title),e.xp6(2),e.AsE(" Today: ",e.xi3(8,5,t.start_date,"H:mm")," - ",e.xi3(9,8,t.end_date,"H:mm")," ")}}function Q(s,n){if(1&s&&(e.TgZ(0,"ul"),e.YNc(1,I,10,13,"li",31),e.qZA()),2&s){const t=n.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function Y(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"li",32)(1,"p",33)(2,"span",34),e.NdJ("click",function(){const r=e.CHM(t).$implicit,i=e.oxw(2);return e.KtG(i.openViewTaskModal(r))}),e._uU(3),e.qZA(),e.TgZ(4,"span",35),e._uU(5),e.qZA()(),e.TgZ(6,"span",37),e._uU(7),e.ALo(8,"date"),e.qZA()()}if(2&s){const t=n.$implicit;e.Q6J("@fadeInOut",void 0),e.xp6(3),e.Oqu(t.title),e.xp6(1),e.Q6J("routerLink",e.VKq(8,f,t.id)),e.xp6(1),e.Oqu(t.title),e.xp6(2),e.hij(" ",e.xi3(8,5,t.end_date,"MMM d, y")," ")}}function H(s,n){if(1&s&&(e.TgZ(0,"ul"),e.YNc(1,Y,9,10,"li",31),e.qZA()),2&s){const t=n.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function S(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"li",32)(1,"p",33)(2,"span",34),e.NdJ("click",function(){const r=e.CHM(t).$implicit,i=e.oxw(2);return e.KtG(i.openViewTaskModal(r))}),e._uU(3),e.qZA(),e.TgZ(4,"span",35),e._uU(5),e.qZA()(),e.TgZ(6,"span",38),e._uU(7),e.ALo(8,"date"),e.qZA()()}if(2&s){const t=n.$implicit;e.Q6J("@fadeInOut",void 0),e.xp6(3),e.Oqu(t.title),e.xp6(1),e.Q6J("routerLink",e.VKq(8,f,t.id)),e.xp6(1),e.Oqu(t.title),e.xp6(2),e.hij(" ",e.xi3(8,5,t.start_date,"E, dd MMM, y")," ")}}function E(s,n){if(1&s&&(e.TgZ(0,"ul"),e.YNc(1,S,9,10,"li",31),e.qZA()),2&s){const t=n.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function V(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"li",32)(1,"p",33)(2,"span",34),e.NdJ("click",function(){const r=e.CHM(t).$implicit,i=e.oxw(2);return e.KtG(i.openViewTaskModal(r))}),e._uU(3),e.qZA(),e.TgZ(4,"span",35),e._uU(5),e.qZA()(),e.TgZ(6,"span",38),e._uU(7),e.ALo(8,"date"),e.qZA()()}if(2&s){const t=n.$implicit;e.Q6J("@fadeInOut",void 0),e.xp6(3),e.Oqu(t.title),e.xp6(1),e.Q6J("routerLink",e.VKq(8,f,t.id)),e.xp6(1),e.Oqu(t.title),e.xp6(2),e.hij(" ",e.xi3(8,5,t.end_date,"H:mm")," ")}}function D(s,n){if(1&s&&(e.TgZ(0,"ul"),e.YNc(1,V,9,10,"li",31),e.qZA()),2&s){const t=n.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function j(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"p",39)(1,"span",34),e.NdJ("click",function(){const r=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.openViewTaskModal(r))}),e._uU(2),e.qZA(),e.TgZ(3,"span",35),e._uU(4),e.qZA()()}if(2&s){const t=n.$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(1),e.Q6J("routerLink",e.VKq(3,f,t.id)),e.xp6(1),e.Oqu(t.title)}}function K(s,n){if(1&s&&(e.TgZ(0,"div",40)(1,"span"),e._uU(2),e.qZA()()),2&s){const t=n.$implicit;e.xp6(2),e.Oqu(t)}}function G(s,n){1&s&&(e.TgZ(0,"div",41),e._UZ(1,"div",42)(2,"div",42),e.qZA())}class T{constructor(n,t,o,a){this.taskService=n,this.store$=t,this.modalService=o,this.notificationService=a,this.showOverdueTasks=!1,this.showNextTasks=!1,this.showUnscheduledTasks=!1,this.today=new Date,this.times=b,this.todayTasks$=this.store$.select(v.f.selectTodayTasks),this.overdueTasks$=this.store$.select(v.f.selectOverdueTasks),this.nextTasks$=this.store$.select(v.f.selectNextTasks),this.unscheduledTasks$=this.store$.select(v.f.selectUnscheduledTasks)}ngOnInit(){this.store$.dispatch(c.w.getTodayTasks()),this.store$.dispatch(c.w.getOverdueTasks()),this.store$.dispatch(c.w.getNextTasks()),this.store$.dispatch(c.w.getUnscheduledTasks());let n=new Date;this.hourNow=`${n.getHours()}:${String(n.getMinutes()).padStart(2,"0")}`,this.lineTopPx=`${60*n.getHours()+n.getMinutes()}px`,this.interval=setInterval(()=>{n=new Date,this.hourNow=`${n.getHours()}:${String(n.getMinutes()).padStart(2,"0")}`,this.lineTopPx=`${60*n.getHours()+n.getMinutes()}px`},1e3)}ngAfterViewInit(){let n=new Date;this.calendarView.nativeElement.scrollTop=60*n.getHours()+n.getMinutes()}ngOnDestroy(){this.interval&&clearInterval(this.interval)}addNewTask(){this.modalService.openFormModal(y.e).afterClosed().subscribe(t=>{const o=t.data&&t.data.taskForm&&t.data.taskForm.value?t.data.taskForm.value:null;if(o){let a={};a={...a,title:o.title},""!==o.priority&&(a={...a,priority:o.priority}),""!==o.status&&(a={...a,status:o.status}),""!==o.start_date&&(a={...a,start_date:o.start_date}),""!==o.end_date&&(a={...a,end_date:o.end_date}),this.taskService.saveTask(a).subscribe({next:r=>{this.notificationService.showSuccessNotification(r.message);const i=r.task;let d,_;console.log("response.task:",i),i.start_date&&(d=new Date(i.start_date)),i.end_date&&(_=new Date(i.end_date));const u=new Date;(d&&d.getDate()===u.getDate()&&d.getMonth()===u.getMonth()&&d.getFullYear()===u.getFullYear()||_&&_.getDate()===u.getDate()&&_.getMonth()===u.getMonth()&&_.getFullYear()===u.getFullYear())&&(this.store$.dispatch(C.X.addTodayTaskSuccess({task:i})),i.priority===A.T.URGENT&&this.store$.dispatch(w.U.addUrgentTaskSuccess({task:i})))},error:r=>this.notificationService.showErrorNotification(r.error.message)})}})}getOverdueTasks(){this.store$.dispatch(c.w.getOverdueTasks()),console.log("Called Load overdue tasks")}getNextTasks(){console.log("Called Load Next tasks"),this.store$.dispatch(c.w.getNextTasks())}getUnscheduledTasks(){console.log("Called Load Unscheduled tasks"),this.store$.dispatch(c.w.getUnscheduledTasks())}openViewTaskModal(n){this.modalService.openFormModal(Z.e,{task:n})}logScroll(n){console.log(n)}}T.\u0275fac=function(n){return new(n||T)(e.Y36($.M),e.Y36(M.yh),e.Y36(U.Z),e.Y36(N.g))},T.\u0275cmp=e.Xpm({type:T,selectors:[["app-agenda"]],viewQuery:function(n,t){if(1&n&&e.Gf(F,5),2&n){let o;e.iGM(o=e.CRH())&&(t.calendarView=o.first)}},decls:57,vars:45,consts:[[3,"title"],[1,"px-2","py-5","md:p-5","grid","grid-cols-1","lg:grid-cols-2","gap-5"],[1,"h-[75vh]","p-5","bg-white","dark:bg-gray-900","border","overflow-auto","rounded-md"],[1,"text-2xl"],[1,"my-3"],["type","hidden","value","false"],["showAddTaskButton",""],[1,"mb-3","h-4","flex","gap-3","items-center",3,"mouseenter","mouseleave"],[4,"ngIf","ngIfElse"],["todayTasksTemplate",""],["class","px-2 py-1 text-sm dark:hover:bg-gray-700 dark:active:bg-gray-800 rounded",3,"click",4,"ngIf"],[4,"ngIf"],[1,"my-3","text-sm","cursor-pointer",3,"click"],["id","calendarView",1,"h-[75vh]","md:p-5","bg-white","dark:bg-gray-900","border","overflow-auto","rounded-md"],["calendarView",""],[1,"pl-5","md:pl-0","text-2xl"],[1,"pl-5","md:pl-0","mb-3"],[1,"bg-white","dark:bg-[#111827]","sticky","top-[-20px]","z-20","flex","items-center","gap-2","border-b","dark:border-gray-600"],[1,"pl-5","md:pl-0","w-[70px]","text-sm","whitespace-nowrap"],[1,"w-full"],["class","p-2 m-1 text-sm text-ellipsis overflow-hidden ... border bg-gray-800 hover:bg-gray-700 rounded ",4,"ngFor","ngForOf"],[1,"flex"],[1,"w-[70px]","h-[100%]","border-r","dark:border-gray-600"],["class","w-[70px] h-[60px] flex justify-center text-sm relative",4,"ngFor","ngForOf"],[1,"w-full","relative"],[1,"flex","items-center","absolute","left-[-58px]","z-10"],[1,"px-2","text-orange-900","bg-orange-400","rounded-lg"],[1,"h-[1px]","w-[82vw]","lg:w-[36vw]","bg-orange-400"],["class","h-[59px] border-b dark:border-gray-600",4,"ngFor","ngForOf"],[1,"py-1","text-sm"],[1,"px-2","py-1","text-sm","dark:hover:bg-gray-700","dark:active:bg-gray-800","rounded",3,"click"],["class","p-2 bg-gray-50 hover:bg-gray-100 border border-gray-50 hover:border-gray-400 dark:border-gray-800 dark:hover:border-gray-500 text-sm flex items-center relative dark:bg-gray-800 dark:hover:bg-gray-700",4,"ngFor","ngForOf"],[1,"p-2","bg-gray-50","hover:bg-gray-100","border","border-gray-50","hover:border-gray-400","dark:border-gray-800","dark:hover:border-gray-500","text-sm","flex","items-center","relative","dark:bg-gray-800","dark:hover:bg-gray-700"],[1,"text-ellipsis","overflow-hidden","..."],[1,"cursor-pointer","hidden","md:inline-block",3,"click"],[1,"cursor-pointer","inline-block","md:hidden",3,"routerLink"],[1,"text-sm","absolute","right-1"],[1,"text-[12px]","text-rose-300","absolute","right-1"],[1,"text-[12px]","text-cyan-300","absolute","right-1"],[1,"p-2","m-1","text-sm","text-ellipsis","overflow-hidden","...","border","bg-gray-800","hover:bg-gray-700","rounded"],[1,"w-[70px]","h-[60px]","flex","justify-center","text-sm","relative"],[1,"h-[59px]","border-b","dark:border-gray-600"],[1,"cursor-pointer","h-[29px]","hover:bg-gray-100","dark:hover:bg-gray-800"]],template:function(n,t){if(1&n){const o=e.EpF();e._UZ(0,"app-page-title",0),e.TgZ(1,"section",1)(2,"div",2)(3,"h3",3),e._uU(4,"My Work"),e.qZA(),e._UZ(5,"hr",4)(6,"input",5,6),e.TgZ(8,"div",7),e.NdJ("mouseenter",function(){e.CHM(o);const r=e.MAs(7);return e.KtG(r.value="true")})("mouseleave",function(){e.CHM(o);const r=e.MAs(7);return e.KtG(r.value="false")}),e.YNc(9,J,2,1,"span",8),e.ALo(10,"async"),e.YNc(11,q,2,0,"ng-template",null,9,e.W1O),e.YNc(13,L,2,0,"button",10),e.qZA(),e.YNc(14,Q,2,1,"ul",11),e.ALo(15,"async"),e.TgZ(16,"p",12),e.NdJ("click",function(){return t.getOverdueTasks(),t.showOverdueTasks=!t.showOverdueTasks}),e._uU(17),e.ALo(18,"async"),e.ALo(19,"async"),e.qZA(),e.YNc(20,H,2,1,"ul",11),e.ALo(21,"async"),e.TgZ(22,"p",12),e.NdJ("click",function(){return t.getNextTasks(),t.showNextTasks=!t.showNextTasks}),e._uU(23),e.ALo(24,"async"),e.ALo(25,"async"),e.qZA(),e.YNc(26,E,2,1,"ul",11),e.ALo(27,"async"),e.TgZ(28,"p",12),e.NdJ("click",function(){return t.getUnscheduledTasks(),t.showUnscheduledTasks=!t.showUnscheduledTasks}),e._uU(29),e.ALo(30,"async"),e.ALo(31,"async"),e.qZA(),e.YNc(32,D,2,1,"ul",11),e.ALo(33,"async"),e.qZA(),e.TgZ(34,"div",13,14)(36,"h3",15),e._uU(37,"Calendar"),e.qZA(),e._UZ(38,"hr",4),e.TgZ(39,"p",16),e._uU(40),e.ALo(41,"date"),e.qZA(),e.TgZ(42,"div",17)(43,"span",18),e._uU(44,"All Day"),e.qZA(),e.TgZ(45,"div",19),e.YNc(46,j,5,5,"p",20),e.ALo(47,"async"),e.qZA()(),e.TgZ(48,"section",21)(49,"div",22),e.YNc(50,K,3,1,"div",23),e.qZA(),e.TgZ(51,"div",24)(52,"div",25)(53,"span",26),e._uU(54),e.qZA(),e._UZ(55,"span",27),e.qZA(),e.YNc(56,G,3,0,"div",28),e.qZA()()()()}if(2&n){const o=e.MAs(7),a=e.MAs(12);let r,i,d;e.Q6J("title","Agenda"),e.xp6(9),e.Q6J("ngIf",e.lcZ(10,18,t.todayTasks$))("ngIfElse",a),e.xp6(4),e.Q6J("ngIf","true"===o.value),e.xp6(1),e.Q6J("ngIf",e.lcZ(15,20,t.todayTasks$)),e.xp6(3),e.hij("Overdue(",null!=(r=e.lcZ(18,22,t.overdueTasks$))&&r.length?null==(r=e.lcZ(19,24,t.overdueTasks$))?null:r.length:"0",")"),e.xp6(3),e.Q6J("ngIf",t.showOverdueTasks&&e.lcZ(21,26,t.overdueTasks$)),e.xp6(3),e.hij("Next(",null!=(i=e.lcZ(24,28,t.nextTasks$))&&i.length?null==(i=e.lcZ(25,30,t.nextTasks$))?null:i.length:"0",")"),e.xp6(3),e.Q6J("ngIf",t.showNextTasks&&e.lcZ(27,32,t.nextTasks$)),e.xp6(3),e.hij("Unscheduled(",null!=(d=e.lcZ(30,34,t.unscheduledTasks$))&&d.length?null==(d=e.lcZ(31,36,t.unscheduledTasks$))?null:d.length:"0",")"),e.xp6(3),e.Q6J("ngIf",t.showUnscheduledTasks&&e.lcZ(33,38,t.unscheduledTasks$)),e.xp6(8),e.hij("Today: ",e.xi3(41,40,t.today,"d MMM, EEEE"),""),e.xp6(6),e.Q6J("ngForOf",e.lcZ(47,43,t.todayTasks$)),e.xp6(4),e.Q6J("ngForOf",t.times),e.xp6(2),e.Akn("top:"+t.lineTopPx),e.xp6(2),e.Oqu(t.hourNow),e.xp6(2),e.Q6J("ngForOf",t.times)}},dependencies:[m.sg,m.O5,k.rH,O.T,m.Ov,m.uU],data:{animation:[(0,h.X$)("fadeInOut",[(0,h.SB)("void",(0,h.oB)({transform:"scaleX(0.01)",opacity:0})),(0,h.eR)("void <=> *",(0,h.jt)(400))])]}});const B=[{path:"",component:T}];class p{}p.\u0275fac=function(n){return new(n||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[k.Bz.forChild(B),k.Bz]});var R=l(4006),z=l(7392),P=l(9017),X=l(990);class g{}g.\u0275fac=function(n){return new(n||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[m.ez,k.Bz,R.u5,z.Ps,P.Tx,p,X.m]})}}]);