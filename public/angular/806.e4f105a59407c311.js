"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[806],{5806:(G,u,d)=>{d.r(u),d.d(u,{CalendarWeekModule:()=>l});var c=d(6895),_=d(3127),k=d(6002),x=d(1844),h=d(921),Z=d(9208),t=d(4650),v=d(6814),y=d(4359),f=d(4519);function A(a,i){if(1&a&&(t.TgZ(0,"div",18)(1,"span"),t._uU(2),t.qZA()()),2&a){const e=i.$implicit;t.xp6(2),t.Oqu(e)}}function q(a,i){1&a&&(t.TgZ(0,"div",19),t._UZ(1,"div",20)(2,"div",20),t.qZA())}const r=function(a){return["/tasks",a]};function C(a,i){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"p",23)(2,"span",24),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw();return t.KtG(s.openViewTaskModal(o))}),t._uU(3),t.qZA(),t.TgZ(4,"span",25),t._uU(5),t.qZA(),t.TgZ(6,"span",26),t._uU(7),t.ALo(8,"taskTime"),t.qZA()(),t.BQk()}if(2&a){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Akn("height:"+n.calculateTaskHeight(e)+"px"),t.xp6(2),t.Oqu(e.title),t.xp6(1),t.Q6J("routerLink",t.VKq(9,r,e.id)),t.xp6(1),t.Oqu(e.title),t.xp6(2),t.Oqu(t.xi3(8,6,e.start_date,e.end_date))}}function D(a,i){if(1&a&&(t.TgZ(0,"div",21),t.YNc(1,C,9,11,"ng-container",22),t.qZA()),2&a){const e=i.$implicit,n=t.oxw();t.Akn("top:"+n.calculateTopPx(e)+"px;"),t.xp6(1),t.Q6J("ngIf",n.calculateTaskHeight(e))}}function w(a,i){1&a&&(t.TgZ(0,"div",19),t._UZ(1,"div",20)(2,"div",20),t.qZA())}function O(a,i){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"p",23)(2,"span",24),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw();return t.KtG(s.openViewTaskModal(o))}),t._uU(3),t.qZA(),t.TgZ(4,"span",25),t._uU(5),t.qZA(),t.TgZ(6,"span",26),t._uU(7),t.ALo(8,"taskTime"),t.qZA()(),t.BQk()}if(2&a){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Akn("height:"+n.calculateTaskHeight(e)+"px"),t.xp6(2),t.Oqu(e.title),t.xp6(1),t.Q6J("routerLink",t.VKq(9,r,e.id)),t.xp6(1),t.Oqu(e.title),t.xp6(2),t.Oqu(t.xi3(8,6,e.start_date,e.end_date))}}function M(a,i){if(1&a&&(t.TgZ(0,"div",21),t.YNc(1,O,9,11,"ng-container",22),t.qZA()),2&a){const e=i.$implicit,n=t.oxw();t.Akn("top:"+n.calculateTopPx(e)+"px;"),t.xp6(1),t.Q6J("ngIf",n.calculateTaskHeight(e))}}function U(a,i){1&a&&(t.TgZ(0,"div",19),t._UZ(1,"div",20)(2,"div",20),t.qZA())}function F(a,i){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"p",23)(2,"span",24),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw();return t.KtG(s.openViewTaskModal(o))}),t._uU(3),t.qZA(),t.TgZ(4,"span",25),t._uU(5),t.qZA(),t.TgZ(6,"span",26),t._uU(7),t.ALo(8,"taskTime"),t.qZA()(),t.BQk()}if(2&a){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Akn("height:"+n.calculateTaskHeight(e)+"px"),t.xp6(2),t.Oqu(e.title),t.xp6(1),t.Q6J("routerLink",t.VKq(9,r,e.id)),t.xp6(1),t.Oqu(e.title),t.xp6(2),t.Oqu(t.xi3(8,6,e.start_date,e.end_date))}}function N(a,i){if(1&a&&(t.TgZ(0,"div",21),t.YNc(1,F,9,11,"ng-container",22),t.qZA()),2&a){const e=i.$implicit,n=t.oxw();t.Akn("top:"+n.calculateTopPx(e)+"px;"),t.xp6(1),t.Q6J("ngIf",n.calculateTaskHeight(e))}}function J(a,i){1&a&&(t.TgZ(0,"div",19),t._UZ(1,"div",20)(2,"div",20),t.qZA())}function $(a,i){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"p",23)(2,"span",24),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw();return t.KtG(s.openViewTaskModal(o))}),t._uU(3),t.qZA(),t.TgZ(4,"span",25),t._uU(5),t.qZA(),t.TgZ(6,"span",26),t._uU(7),t.ALo(8,"taskTime"),t.qZA()(),t.BQk()}if(2&a){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Akn("height:"+n.calculateTaskHeight(e)+"px"),t.xp6(2),t.Oqu(e.title),t.xp6(1),t.Q6J("routerLink",t.VKq(9,r,e.id)),t.xp6(1),t.Oqu(e.title),t.xp6(2),t.Oqu(t.xi3(8,6,e.start_date,e.end_date))}}function W(a,i){if(1&a&&(t.TgZ(0,"div",21),t.YNc(1,$,9,11,"ng-container",22),t.qZA()),2&a){const e=i.$implicit,n=t.oxw();t.Akn("top:"+n.calculateTopPx(e)+"px;"),t.xp6(1),t.Q6J("ngIf",n.calculateTaskHeight(e))}}function Y(a,i){1&a&&(t.TgZ(0,"div",19),t._UZ(1,"div",20)(2,"div",20),t.qZA())}function Q(a,i){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"p",23)(2,"span",24),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw();return t.KtG(s.openViewTaskModal(o))}),t._uU(3),t.qZA(),t.TgZ(4,"span",25),t._uU(5),t.qZA(),t.TgZ(6,"span",26),t._uU(7),t.ALo(8,"taskTime"),t.qZA()(),t.BQk()}if(2&a){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Akn("height:"+n.calculateTaskHeight(e)+"px"),t.xp6(2),t.Oqu(e.title),t.xp6(1),t.Q6J("routerLink",t.VKq(9,r,e.id)),t.xp6(1),t.Oqu(e.title),t.xp6(2),t.Oqu(t.xi3(8,6,e.start_date,e.end_date))}}function H(a,i){if(1&a&&(t.TgZ(0,"div",21),t.YNc(1,Q,9,11,"ng-container",22),t.qZA()),2&a){const e=i.$implicit,n=t.oxw();t.Akn("top:"+n.calculateTopPx(e)+"px;"),t.xp6(1),t.Q6J("ngIf",n.calculateTaskHeight(e))}}function b(a,i){1&a&&(t.TgZ(0,"div",19),t._UZ(1,"div",20)(2,"div",20),t.qZA())}function P(a,i){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"p",23)(2,"span",24),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw();return t.KtG(s.openViewTaskModal(o))}),t._uU(3),t.qZA(),t.TgZ(4,"span",25),t._uU(5),t.qZA(),t.TgZ(6,"span",26),t._uU(7),t.ALo(8,"taskTime"),t.qZA()(),t.BQk()}if(2&a){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Akn("height:"+n.calculateTaskHeight(e)+"px"),t.xp6(2),t.Oqu(e.title),t.xp6(1),t.Q6J("routerLink",t.VKq(9,r,e.id)),t.xp6(1),t.Oqu(e.title),t.xp6(2),t.Oqu(t.xi3(8,6,e.start_date,e.end_date))}}function L(a,i){if(1&a&&(t.TgZ(0,"div",21),t.YNc(1,P,9,11,"ng-container",22),t.qZA()),2&a){const e=i.$implicit,n=t.oxw();t.Akn("top:"+n.calculateTopPx(e)+"px;"),t.xp6(1),t.Q6J("ngIf",n.calculateTaskHeight(e))}}function V(a,i){1&a&&(t.TgZ(0,"div",19),t._UZ(1,"div",20)(2,"div",20),t.qZA())}function K(a,i){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"p",23)(2,"span",24),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw();return t.KtG(s.openViewTaskModal(o))}),t._uU(3),t.qZA(),t.TgZ(4,"span",25),t._uU(5),t.qZA(),t.TgZ(6,"span",26),t._uU(7),t.ALo(8,"taskTime"),t.qZA()(),t.BQk()}if(2&a){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Akn("height:"+n.calculateTaskHeight(e)+"px"),t.xp6(2),t.Oqu(e.title),t.xp6(1),t.Q6J("routerLink",t.VKq(9,r,e.id)),t.xp6(1),t.Oqu(e.title),t.xp6(2),t.Oqu(t.xi3(8,6,e.start_date,e.end_date))}}function S(a,i){if(1&a&&(t.TgZ(0,"div",21),t.YNc(1,K,9,11,"ng-container",22),t.qZA()),2&a){const e=i.$implicit,n=t.oxw();t.Akn("top:"+n.calculateTopPx(e)+"px;"),t.xp6(1),t.Q6J("ngIf",n.calculateTaskHeight(e))}}class g{constructor(i,e){this.store$=i,this.modalService=e,this.secondDay=[],this.thirdDay=[],this.fourthDay=[],this.fifthDay=[],this.sixthDay=[],this.seventhDay=[],this.times=k.S,this.today=new Date,this.days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.store$.dispatch(h.w.getTodayTasks()),this.store$.dispatch(h.w.getNextTasks()),this.todayTasks$=this.store$.select(x.f.selectTodayTasks),this.nextTasks$=this.store$.select(x.f.selectNextTasks),this.hourNow=`${this.today.getHours()}:${String(this.today.getMinutes()).padStart(2,"0")}`,this.lineTopPx=`${60*this.today.getHours()+this.today.getMinutes()}px`;const n=1e3*(60-this.today.getSeconds());setTimeout(()=>{this.interval=setInterval(()=>{this.hourNow=`${this.today.getHours()}:${String(this.today.getMinutes()).padStart(2,"0")}`,this.lineTopPx=`${60*this.today.getHours()+this.today.getMinutes()}px`},6e4)},n)}ngOnInit(){this.nextTasks$.subscribe(i=>{i.map(e=>{if(e.start_date){const n=new Date(e.start_date);this.today.getDate()+1===n.getDate()&&this.today.getMonth()===n.getMonth()&&this.today.getFullYear()===n.getFullYear()?this.secondDay.push(e):this.today.getDate()+2===n.getDate()&&this.today.getMonth()===n.getMonth()&&this.today.getFullYear()===n.getFullYear()?this.thirdDay.push(e):this.today.getDate()+3===n.getDate()&&this.today.getMonth()===n.getMonth()&&this.today.getFullYear()===n.getFullYear()?this.fourthDay.push(e):this.today.getDate()+4===n.getDate()&&this.today.getMonth()===n.getMonth()&&this.today.getFullYear()===n.getFullYear()?this.fifthDay.push(e):this.today.getDate()+5===n.getDate()&&this.today.getMonth()===n.getMonth()&&this.today.getFullYear()===n.getFullYear()?this.sixthDay.push(e):this.today.getDate()+6===n.getDate()&&this.today.getMonth()===n.getMonth()&&this.today.getFullYear()===n.getFullYear()&&this.seventhDay.push(e)}})})}calculateTopPx(i){if(i.start_date){const e=new Date(i.start_date);return 60*e.getHours()+e.getMinutes()}return null}calculateTaskHeight(i){if(i.start_date&&i.end_date){const e=new Date(i.start_date),n=60*e.getHours()+e.getMinutes(),o=new Date(i.end_date);return 60*o.getHours()+o.getMinutes()-n}return null}openViewTaskModal(i){this.modalService.openFormModal(Z.e,{task:i})}getDayName(i){return i>=7?0:i}getDateAndMonth(i,e){const n=new Date,o=n.getFullYear(),s=n.getMonth(),T=(new Date(o,s,1),new Date(o,s+1,0));if(i+e>T.getDate()){const E=new Date(this.today.getFullYear(),this.today.getMonth()+2,e),m=i+e-T.getDate();if(m<=7)return`${m} ${this.months[E.getMonth()]}`}return`${n.getDate()+e} ${this.months[n.getMonth()]}`}}g.\u0275fac=function(i){return new(i||g)(t.Y36(v.yh),t.Y36(y.Z))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-calendar-week"]],decls:80,vars:49,consts:[[1,"h-[90vh]","bg-white","dark:bg-gray-900","overflow-auto"],[1,"pt-2","ml-[3px]","flex","sticky","top-0","z-30","dark:bg-gray-900","border-b","dark:border-gray-600"],[1,"w-[70px]"],[1,"px-5","w-[14%]","border-l","dark:border-gray-600"],[1,"text-sm","md:text-lg"],[1,"text-[10px]","md:text-sm"],[1,"flex"],[1,"w-[70px]","h-[100%]","border-r","dark:border-gray-600"],["class","w-[70px] h-[60px] flex justify-center text-sm relative",4,"ngFor","ngForOf"],[1,"w-[14%]","relative","border-r","dark:border-gray-600"],["class","h-[60px] border-b dark:border-gray-600",4,"ngFor","ngForOf"],[1,"flex","items-center","absolute","left-[-58px]","z-20"],[1,"px-2","text-orange-900","bg-orange-400","rounded-lg"],[1,"my-3","flex","items-center","absolute","w-full","z-20"],[1,"h-[1px]","w-[19vw]","bg-orange-400"],["class","absolute z-10 w-[100%] mx-[1px]",3,"style",4,"ngFor","ngForOf"],[1,"my-3","flex","items-center","absolute","w-[100%]","z-20"],[1,"h-[1px]","w-[82vw]","lg:w-[36vw]","bg-orange-400"],[1,"w-[70px]","h-[60px]","flex","justify-center","text-sm","relative"],[1,"h-[60px]","border-b","dark:border-gray-600"],[1,"cursor-pointer","h-[30px]","hover:bg-gray-100","dark:hover:bg-gray-800"],[1,"absolute","z-10","w-[100%]","mx-[1px]"],[4,"ngIf"],[1,"p-1","text-sm","text-ellipsis","overflow-hidden","...","bg-gray-800","hover:bg-gray-700","border","rounded"],[1,"cursor-pointer","hidden","md:inline-block",3,"click"],[1,"cursor-pointer","inline-block","md:hidden",3,"routerLink"],[1,"absolute","text-[10px]","bottom-0","right-1"]],template:function(i,e){1&i&&(t.TgZ(0,"section",0)(1,"section",1),t._UZ(2,"div",2),t.TgZ(3,"div",3)(4,"h4",4),t._uU(5),t.qZA(),t.TgZ(6,"p",5),t._uU(7),t.qZA()(),t.TgZ(8,"div",3)(9,"h4",4),t._uU(10),t.qZA(),t.TgZ(11,"p",5),t._uU(12),t.qZA()(),t.TgZ(13,"div",3)(14,"h4",4),t._uU(15),t.qZA(),t.TgZ(16,"p",5),t._uU(17),t.qZA()(),t.TgZ(18,"div",3)(19,"h4",4),t._uU(20),t.qZA(),t.TgZ(21,"p",5),t._uU(22),t.qZA()(),t.TgZ(23,"div",3)(24,"h4",4),t._uU(25),t.qZA(),t.TgZ(26,"p",5),t._uU(27),t.qZA()(),t.TgZ(28,"div",3)(29,"h4",4),t._uU(30),t.qZA(),t.TgZ(31,"p",5),t._uU(32),t.qZA()(),t.TgZ(33,"div",3)(34,"h4",4),t._uU(35),t.qZA(),t.TgZ(36,"p",5),t._uU(37),t.qZA()()(),t.TgZ(38,"section",6)(39,"div",7),t.YNc(40,A,3,1,"div",8),t.qZA(),t.TgZ(41,"div",9),t.YNc(42,q,3,0,"div",10),t.TgZ(43,"div",11)(44,"span",12),t._uU(45),t.qZA()(),t.TgZ(46,"div",13),t._UZ(47,"span",14),t.qZA(),t.YNc(48,D,2,3,"div",15),t.ALo(49,"async"),t.qZA(),t.TgZ(50,"div",9),t.YNc(51,w,3,0,"div",10),t.TgZ(52,"div",16),t._UZ(53,"span",17),t.qZA(),t.YNc(54,M,2,3,"div",15),t.qZA(),t.TgZ(55,"div",9),t.YNc(56,U,3,0,"div",10),t.TgZ(57,"div",13),t._UZ(58,"span",17),t.qZA(),t.YNc(59,N,2,3,"div",15),t.qZA(),t.TgZ(60,"div",9),t.YNc(61,J,3,0,"div",10),t.TgZ(62,"div",13),t._UZ(63,"span",17),t.qZA(),t.YNc(64,W,2,3,"div",15),t.qZA(),t.TgZ(65,"div",9),t.YNc(66,Y,3,0,"div",10),t.TgZ(67,"div",13),t._UZ(68,"span",17),t.qZA(),t.YNc(69,H,2,3,"div",15),t.qZA(),t.TgZ(70,"div",9),t.YNc(71,b,3,0,"div",10),t.TgZ(72,"div",13),t._UZ(73,"span",17),t.qZA(),t.YNc(74,L,2,3,"div",15),t.qZA(),t.TgZ(75,"div",9),t.YNc(76,V,3,0,"div",10),t.TgZ(77,"div",13),t._UZ(78,"span",17),t.qZA(),t.YNc(79,S,2,3,"div",15),t.qZA()()()),2&i&&(t.xp6(5),t.Oqu(e.days[e.getDayName(e.today.getDay())]),t.xp6(2),t.AsE("",e.today.getDate()," ",e.months[e.today.getMonth()],""),t.xp6(3),t.Oqu(e.days[e.getDayName(e.today.getDay()+1)]),t.xp6(2),t.Oqu(e.getDateAndMonth(e.today.getDate(),1)),t.xp6(3),t.Oqu(e.days[e.getDayName(e.today.getDay()+2)]),t.xp6(2),t.Oqu(e.getDateAndMonth(e.today.getDate(),2)),t.xp6(3),t.Oqu(e.days[e.getDayName(e.today.getDay()+3)]),t.xp6(2),t.Oqu(e.getDateAndMonth(e.today.getDate(),3)),t.xp6(3),t.Oqu(e.days[e.getDayName(e.today.getDay()+4)]),t.xp6(2),t.Oqu(e.getDateAndMonth(e.today.getDate(),4)),t.xp6(3),t.Oqu(e.days[e.getDayName(e.today.getDay()+5)]),t.xp6(2),t.Oqu(e.getDateAndMonth(e.today.getDate(),5)),t.xp6(3),t.Oqu(e.days[e.getDayName(e.today.getDay()+6)]),t.xp6(2),t.Oqu(e.getDateAndMonth(e.today.getDate(),6)),t.xp6(3),t.Q6J("ngForOf",e.times),t.xp6(2),t.Q6J("ngForOf",e.times),t.xp6(1),t.Akn("top:"+e.lineTopPx),t.xp6(2),t.Oqu(e.hourNow),t.xp6(1),t.Akn("top:"+e.lineTopPx),t.xp6(2),t.Q6J("ngForOf",t.lcZ(49,47,e.todayTasks$)),t.xp6(3),t.Q6J("ngForOf",e.times),t.xp6(1),t.Akn("top:"+e.lineTopPx),t.xp6(2),t.Q6J("ngForOf",e.secondDay),t.xp6(2),t.Q6J("ngForOf",e.times),t.xp6(1),t.Akn("top:"+e.lineTopPx),t.xp6(2),t.Q6J("ngForOf",e.thirdDay),t.xp6(2),t.Q6J("ngForOf",e.times),t.xp6(1),t.Akn("top:"+e.lineTopPx),t.xp6(2),t.Q6J("ngForOf",e.fourthDay),t.xp6(2),t.Q6J("ngForOf",e.times),t.xp6(1),t.Akn("top:"+e.lineTopPx),t.xp6(2),t.Q6J("ngForOf",e.fifthDay),t.xp6(2),t.Q6J("ngForOf",e.times),t.xp6(1),t.Akn("top:"+e.lineTopPx),t.xp6(2),t.Q6J("ngForOf",e.sixthDay),t.xp6(2),t.Q6J("ngForOf",e.times),t.xp6(1),t.Akn("top:"+e.lineTopPx),t.xp6(2),t.Q6J("ngForOf",e.seventhDay))},dependencies:[c.sg,c.O5,_.rH,c.Ov,f.n]});const B=[{path:"",component:g}];class p{}p.\u0275fac=function(i){return new(i||p)},p.\u0275mod=t.oAB({type:p}),p.\u0275inj=t.cJS({imports:[_.Bz.forChild(B),_.Bz]});var I=d(990),z=d(7392);class l{}l.\u0275fac=function(i){return new(i||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[c.ez,z.Ps,p,I.m]})}}]);