"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[410],{2410:(R,k,a)=>{a.r(k),a.d(k,{TasksModule:()=>p});var g=a(6895),T=a(3127),f=a(797),h=a(3645),v=a(6911),y=a(6184),d=a(7340),t=a(4650),A=a(6814),b=a(953),M=a(1645),C=a(1481),U=a(3267),l=a(4006),Z=a(7392),x=a(9017),J=a(6194);function D(n,i){1&n&&(t.TgZ(0,"mat-icon"),t._uU(1,"flag"),t.qZA()),2&n&&t.Akn("color:darkred; padding: 3px 0 5px 3px; font-size:25px; height:33px; width:33px; border:1px solid; border-radius:50%;")}function S(n,i){1&n&&(t.TgZ(0,"mat-icon"),t._uU(1,"flag"),t.qZA()),2&n&&t.Akn("color:darkorange; padding: 3px 0 5px 3px; font-size:25px; height:33px; width:33px; border:1px solid; border-radius:50%;")}function I(n,i){1&n&&(t.TgZ(0,"mat-icon"),t._uU(1,"flag"),t.qZA()),2&n&&t.Akn("color: lightblue; padding: 3px 0 5px 3px; font-size:25px; height:33px; width:33px; border:1px solid; border-radius:50%;")}function N(n,i){1&n&&(t.TgZ(0,"mat-icon"),t._uU(1,"flag"),t.qZA()),2&n&&t.Akn("color: darkgray; padding: 3px 0 5px 3px; font-size:25px; height:33px; width:33px; border:1px solid; border-radius:50%;")}function Q(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){const r=t.CHM(e).$implicit;t.oxw();const c=t.MAs(28),_=t.oxw().ngIf;return t.oxw().updateTaskId(_.id,_.status,"status",r),t.KtG(c.innerText=r)}),t._uU(1),t.qZA()}if(2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e," ")}}function w(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"section")(1,"div",6)(2,"button",7)(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.TgZ(5,"mat-menu",null,8)(7,"button",9),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.editTask=!0)}),t.TgZ(8,"mat-icon"),t._uU(9,"edit"),t.qZA(),t.TgZ(10,"span"),t._uU(11,"Edit"),t.qZA()(),t.TgZ(12,"button",9),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().ngIf,r=t.oxw();return t.KtG(r.deleteTask(o))}),t.TgZ(13,"mat-icon"),t._uU(14,"delete"),t.qZA(),t.TgZ(15,"span"),t._uU(16,"Delete"),t.qZA()()()(),t.TgZ(17,"section",10)(18,"span",11,12),t.ynx(20,13),t.YNc(21,D,2,2,"mat-icon",14),t.YNc(22,S,2,2,"mat-icon",14),t.YNc(23,I,2,2,"mat-icon",14),t.YNc(24,N,2,2,"mat-icon",14),t.BQk(),t.qZA(),t.TgZ(25,"div",15)(26,"div",16)(27,"span",null,17),t._uU(29),t.qZA(),t.TgZ(30,"mat-icon"),t._uU(31,"arrow_right"),t.qZA()(),t.TgZ(32,"mat-menu",18,19),t.YNc(34,Q,2,1,"button",20),t.qZA()()(),t._UZ(35,"div",21),t.TgZ(36,"div",22)(37,"p",16)(38,"mat-icon",23),t._uU(39,"calendar_today"),t.qZA(),t.TgZ(40,"span"),t._uU(41),t.ALo(42,"date"),t.qZA()(),t.TgZ(43,"p",16)(44,"mat-icon",24),t._uU(45,"event"),t.qZA(),t.TgZ(46,"span"),t._uU(47),t.ALo(48,"date"),t.qZA()()()()}if(2&n){const e=t.MAs(6),s=t.MAs(33),o=t.oxw().ngIf,r=t.oxw();t.Q6J("@fadeInOut",void 0),t.xp6(2),t.Q6J("matMenuTriggerFor",e),t.xp6(18),t.Q6J("ngSwitch",o.priority),t.xp6(1),t.Q6J("ngSwitchCase",r.TaskPriorityNames.URGENT),t.xp6(1),t.Q6J("ngSwitchCase",r.TaskPriorityNames.HIGH),t.xp6(1),t.Q6J("ngSwitchCase",r.TaskPriorityNames.LOW),t.xp6(1),t.Q6J("ngSwitchCase",r.TaskPriorityNames.NO_PRIORITY),t.xp6(1),t.Q6J("matMenuTriggerFor",s),t.xp6(4),t.Oqu(o.status),t.xp6(5),t.Q6J("ngForOf",r.taskStatuses),t.xp6(1),t.Q6J("innerHTML",o.description,t.oJD),t.xp6(6),t.hij("Start Date: ",t.xi3(42,13,o.start_date,"MMM d, y"),""),t.xp6(6),t.hij("End Date: ",t.xi3(48,16,o.end_date,"MMM d, y"),"")}}function F(n,i){1&n&&(t.TgZ(0,"span",42),t._uU(1," Please enter Title! "),t.qZA())}function Y(n,i){1&n&&(t.TgZ(0,"span",42),t._uU(1," The task title must be at least 5 - 145 characters long! "),t.qZA())}function O(n,i){if(1&n&&(t.ynx(0),t.YNc(1,F,2,0,"span",41),t.YNc(2,Y,2,0,"span",41),t.BQk()),2&n){t.oxw();const e=t.MAs(5);t.xp6(1),t.Q6J("ngIf",null==e.errors?null:e.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.errors?null:e.errors.minlength)}}function P(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"form",25,26),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.MAs(1),r=t.oxw().ngIf,c=t.oxw();return t.KtG(c.editTaskFormHandler(o,r))}),t.TgZ(2,"div")(3,"div",27),t._UZ(4,"input",28,29),t.qZA(),t.YNc(6,O,3,2,"ng-container",0),t.qZA(),t.TgZ(7,"section",30)(8,"div",31)(9,"label",32),t._uU(10,"Start Date:"),t.qZA(),t.TgZ(11,"div",27),t._UZ(12,"input",33,34),t.qZA()(),t.TgZ(14,"div",31)(15,"label",32),t._uU(16,"End Date:"),t.qZA(),t.TgZ(17,"div",27),t._UZ(18,"input",35,36),t.qZA()()(),t.TgZ(20,"div")(21,"div",27),t._UZ(22,"textarea",37,38),t.qZA()(),t.TgZ(24,"div")(25,"button",39),t._uU(26," Save Changes "),t.qZA(),t.TgZ(27,"button",40),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.editTask=!1)}),t._uU(28," Cancel "),t.qZA()()()}if(2&n){const e=t.MAs(5),s=t.oxw().ngIf,o=t.oxw();t.Q6J("@fadeTaskInOut",void 0),t.xp6(4),t.Q6J("ngModel",s.title),t.xp6(2),t.Q6J("ngIf",e.touched),t.xp6(6),t.Q6J("ngModel",o.dateFn.dateToInputDate(s.start_date)),t.xp6(6),t.Q6J("ngModel",o.dateFn.dateToInputDate(s.end_date)),t.xp6(4),t.Q6J("ngModel",s.description)}}const H=function(n){return["/target",n]};function $(n,i){if(1&n&&(t.ynx(0),t._UZ(1,"app-page-title",1),t.TgZ(2,"button",2)(3,"mat-icon"),t._uU(4,"arrow_back_ios_new"),t.qZA(),t.TgZ(5,"span"),t._uU(6,"Target"),t.qZA()(),t.TgZ(7,"article",3),t.YNc(8,w,49,19,"section",0),t.YNc(9,P,29,6,"form",4),t.qZA(),t.TgZ(10,"div",5),t._uU(11," Subtasks "),t.TgZ(12,"mat-icon"),t._uU(13,"schema"),t.qZA(),t._uU(14," Subtasks "),t.TgZ(15,"mat-icon"),t._uU(16,"tenancy"),t.qZA(),t._uU(17," Subtasks "),t.TgZ(18,"mat-icon"),t._uU(19,"mediation"),t.qZA()(),t.BQk()),2&n){const e=i.ngIf,s=t.oxw();t.xp6(1),t.Q6J("text",e.title),t.xp6(1),t.Q6J("routerLink",t.VKq(4,H,e.target_id)),t.xp6(6),t.Q6J("ngIf",!s.editTask),t.xp6(1),t.Q6J("ngIf",s.editTask)}}class u{constructor(i,e,s,o,r,c){this.store$=i,this.taskService=e,this.notificationService=s,this.activatedRoute=o,this.title=r,this.dateFn=c,this.taskStatuses=Object.values(f.h),this.taskPriority=Object.values(f.T),this.TaskPriorityNames=f.T,this.editTask=!1,this.title.setTitle("Task Details - GoalsApp"),this.activeTask$=this.store$.select(v.N.selectActiveTask)}ngOnInit(){this.activatedRoute.params.subscribe(i=>{this.store$.dispatch(h.C.getActiveTask({taskId:i.id}))})}ngOnDestroy(){this.store$.dispatch(h.C.clear())}editTaskFormHandler(i,e){if(i.invalid)return void this.notificationService.showErrorNotification("Invalid Form Fields!");const s=i.value;let o={};s.title&&s.title!==e.title&&(o={...o,title:s.title}),s.description&&s.description!==e.description&&(o={...o,description:s.description}),s.start_date&&s.start_date+" 00:00:00"!==e.start_date&&(o={...o,start_date:s.start_date}),s.end_date&&s.end_date+" 00:00:00"!==e.end_date&&(o={...o,end_date:s.end_date}),o={...o,id:e.id},this.store$.dispatch(h.C.updateActiveTask({taskId:e.id,changedTask:o})),this.editTask=!1}deleteTask(i){}updateTaskId(i,e,s,o){i&&s&&o&&e?this.taskService.updateTask(i,{id:i,[s]:o}).subscribe({next:c=>{this.notificationService.showSuccessNotification(c.message),this.store$.dispatch(y.U.updateActiveTaskSuccess({changedTask:c.task}))},error:c=>{this.notificationService.showErrorNotification(c.error.message)}}):alert("Invalid Task Update Request!")}}u.\u0275fac=function(i){return new(i||u)(t.Y36(A.yh),t.Y36(b.M),t.Y36(M.g),t.Y36(T.gz),t.Y36(C.Dx),t.Y36(U.D))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-task-details"]],decls:2,vars:3,consts:[[4,"ngIf"],["title","\u2714 TASK:",3,"text"],[1,"hidden","md:flex","m-5","gap-3","items-center","dark:hover:bg-gray-800","px-3","py-2","cursor-pointer","border","rounded",3,"routerLink"],[1,"bg-white","dark:bg-gray-800","relative","p-2","m-1","md:m-5","md:p-5","border","rounded"],["class","bg-white dark:bg-gray-800 mt-5 space-y-6 md:shadow md:p-10 md:rounded-lg\n            dark:shadow-gray-500",3,"ngSubmit",4,"ngIf"],[1,"py-3"],[1,"absolute","top-3","right-3"],["mat-icon-button","","aria-label","task menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"my-5","flex","gap-3","items-center"],["mat-button","",1,"dark:hover:text-gray-700"],["selectorPriority",""],[3,"ngSwitch"],[3,"style",4,"ngSwitchCase"],["mat-button","",1,"dark:hover:bg-gray-700","pl-3","pr-1","py-1","cursor-pointer","border","rounded-md",3,"matMenuTriggerFor"],[1,"flex","items-center"],["selectorStatus",""],["xPosition","after",1,"example-mat-menu","dark:example-mat-menu-dark"],["statusMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"p-5","border","bg-gray-50","dark:bg-gray-700",3,"innerHTML"],[1,"py-5","flex","flex-wrap","justify-between"],[1,"mb-[9px]","text-xl"],[1,"mb-[5px]","text-[24px]"],[1,"bg-white","dark:bg-gray-800","mt-5","space-y-6","md:shadow","md:p-10","md:rounded-lg","dark:shadow-gray-500",3,"ngSubmit"],["editTaskForm","ngForm"],[1,"flex","align-center","border","border-slate-600","rounded"],["type","text","name","title","placeholder","Title...","minlength","5","max","255","required","",1,"w-full","py-2","px-3","dark:bg-gray-800","dark:focus:bg-gray-900","dark:active:bg-gray-700",3,"ngModel"],["title","ngModel"],[1,"flex","flex-wrap"],[1,"text-sm","w-full","md:w-1/2"],[1,"text-color-light","dark:text-color-dark"],["type","date","name","start_date",1,"w-full","py-2","px-3","dark:bg-gray-800","dark:focus:bg-gray-900","dark:active:bg-gray-700",3,"ngModel"],["start_date","ngModel"],["type","date","name","end_date",1,"w-full","py-2","px-3","dark:bg-gray-800","dark:focus:bg-gray-900","dark:active:bg-gray-700",3,"ngModel"],["end_date","ngModel"],["name","description","placeholder","Task Description...",1,"w-full","min-h-[175px]","py-2","px-3","dark:bg-gray-800","dark:focus:bg-gray-900","dark:active:bg-gray-700",3,"ngModel"],["description","ngModel"],["type","submit",1,"relative","btn-primary","dark:btn-primary-dark"],["type","button",1,"py-2","px-3","ml-3","border","shadow","dark:shadow-gray-300","rounded","dark:active:bg-gray-700",3,"click"],["class","text-sm text-red-600",4,"ngIf"],[1,"text-sm","text-red-600"]],template:function(i,e){1&i&&(t.YNc(0,$,20,6,"ng-container",0),t.ALo(1,"async")),2&i&&t.Q6J("ngIf",t.lcZ(1,1,e.activeTask$))},dependencies:[g.sg,g.O5,g.RF,g.n9,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.wO,l.On,l.F,Z.Hw,x.VK,x.OP,x.p6,T.rH,J.T,g.Ov,g.uU],data:{animation:[(0,d.X$)("fadeInOut",[(0,d.SB)("void",(0,d.oB)({transform:"scaleY(0.01)",opacity:0})),(0,d.eR)("void <=> *",(0,d.jt)(400))]),(0,d.X$)("fadeTaskInOut",[(0,d.SB)("void",(0,d.oB)({transform:"scaleY(0.01)",opacity:0})),(0,d.eR)("void <=> *",(0,d.jt)(800))])]}});const j=[{path:"all",loadChildren:()=>Promise.all([a.e(465),a.e(340),a.e(604)]).then(a.bind(a,604)).then(n=>n.AllTasksModule)},{path:"urgent",loadChildren:()=>Promise.all([a.e(465),a.e(340),a.e(888)]).then(a.bind(a,4888)).then(n=>n.UrgentTasksModule)},{path:"important",loadChildren:()=>Promise.all([a.e(465),a.e(340),a.e(550)]).then(a.bind(a,8550)).then(n=>n.ImportantTasksModule)},{path:":id",component:u}];class m{}m.\u0275fac=function(i){return new(i||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[T.Bz.forChild(j),T.Bz]});var B=a(4466);class p{}p.\u0275fac=function(i){return new(i||p)},p.\u0275mod=t.oAB({type:p}),p.\u0275inj=t.cJS({imports:[g.ez,l.u5,Z.Ps,x.Tx,m,B.m]})}}]);