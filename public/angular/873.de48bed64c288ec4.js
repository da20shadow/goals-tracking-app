"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[873],{5873:(G,h,r)=>{r.r(h),r.d(h,{TargetsModule:()=>d});var m=r(6895),u=r(3127),y=r(6433),T=r(8273),Z=r(6911),i=r(7340),A=r(8940),k=r(3645),f=r(7342),b=r(7722),t=r(4650),D=r(6814),M=r(1481),C=r(1645),c=r(4006),v=r(7392),_=r(9017),I=r(6194),J=r(4111);function U(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"section")(1,"div",6)(2,"button",7)(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.TgZ(5,"mat-menu",null,8)(7,"button",9),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.editTarget=!0)}),t.TgZ(8,"mat-icon"),t._uU(9,"edit"),t.qZA(),t.TgZ(10,"span"),t._uU(11,"Edit"),t.qZA()(),t.TgZ(12,"button",9),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().ngIf,g=t.oxw();return t.KtG(g.deleteTarget(s.id,s.goal_id))}),t.TgZ(13,"mat-icon"),t._uU(14,"delete"),t.qZA(),t.TgZ(15,"span"),t._uU(16,"Delete"),t.qZA()()()(),t.TgZ(17,"section",10)(18,"div",11)(19,"span"),t._uU(20,"tasks"),t.qZA(),t.TgZ(21,"span"),t._uU(22),t.qZA()(),t.TgZ(23,"div",12)(24,"div",13),t._uU(25),t.qZA()()(),t._UZ(26,"div",14),t.TgZ(27,"div",15)(28,"p",16)(29,"mat-icon",17),t._uU(30,"calendar_today"),t.qZA(),t.TgZ(31,"span"),t._uU(32),t.ALo(33,"date"),t.qZA()()()()}if(2&a){const e=t.MAs(6),o=t.oxw().ngIf;t.Q6J("@fadeTargetInOut",void 0),t.xp6(2),t.Q6J("matMenuTriggerFor",e),t.xp6(20),t.AsE("",o.total_completed_tasks,"/",o.total_tasks,""),t.xp6(2),t.Akn("width:"+o.progress.toFixed(1)+"%"),t.xp6(1),t.hij("",o.progress.toFixed(1),"% "),t.xp6(1),t.Q6J("innerHTML",o.description,t.oJD),t.xp6(6),t.hij("Created at: ",t.xi3(33,9,o.created_at,"MMM d, y"),"")}}function Q(a,n){1&a&&(t.TgZ(0,"span",29),t._uU(1," Please enter Title! "),t.qZA())}function w(a,n){1&a&&(t.TgZ(0,"span",29),t._uU(1," The Target title must be at least 10 characters long! "),t.qZA())}function F(a,n){if(1&a&&(t.ynx(0),t.YNc(1,Q,2,0,"span",28),t.YNc(2,w,2,0,"span",28),t.BQk()),2&a){t.oxw();const e=t.MAs(6);t.xp6(1),t.Q6J("ngIf",null==e.errors?null:e.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.errors?null:e.errors.minlength)}}function N(a,n){1&a&&(t.TgZ(0,"span",29),t._uU(1," Description can not be empty! "),t.qZA())}function Y(a,n){if(1&a&&(t.ynx(0),t.YNc(1,N,2,0,"span",28),t.BQk()),2&a){t.oxw();const e=t.MAs(11);t.xp6(1),t.Q6J("ngIf",null==e.errors?null:e.errors.required)}}function E(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"form",18,19),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.MAs(1),g=t.oxw(2);return t.KtG(g.editTargetFormHandler(s))}),t._UZ(2,"input",20),t.TgZ(3,"div")(4,"div",21),t._UZ(5,"input",22,23),t.qZA(),t.YNc(7,F,3,2,"ng-container",0),t.qZA(),t.TgZ(8,"div")(9,"div",21),t._UZ(10,"textarea",24,25),t.qZA(),t.YNc(12,Y,2,1,"ng-container",0),t.qZA(),t.TgZ(13,"div")(14,"button",26),t._uU(15," Save Changes "),t.qZA(),t.TgZ(16,"button",27),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.editTarget=!1)}),t._uU(17," Cancel "),t.qZA()()()}if(2&a){const e=t.MAs(6),o=t.oxw().ngIf;t.Q6J("@fadeInOut",void 0),t.xp6(2),t.Q6J("ngModel",o.id),t.xp6(3),t.Q6J("ngModel",o.title),t.xp6(2),t.Q6J("ngIf",e.touched),t.xp6(3),t.Q6J("ngModel",o.description),t.xp6(2),t.Q6J("ngIf",e.touched)}}function B(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"section",30)(1,"app-tasks-list",31),t.NdJ("taskEvent",function(s){t.CHM(e);const g=t.oxw().ngIf,x=t.oxw();return t.KtG(x.updateTargetProgress(s,g))}),t.qZA()()}if(2&a){const e=n.ngIf,o=t.oxw().ngIf;t.xp6(1),t.Q6J("targetId",o.id)("tasksList",e)}}const L=function(a){return["/goals",a]};function $(a,n){if(1&a&&(t.ynx(0),t._UZ(1,"app-page-title",1),t.TgZ(2,"button",2)(3,"mat-icon"),t._uU(4,"arrow_back_ios_new"),t.qZA(),t.TgZ(5,"span"),t._uU(6,"Goal"),t.qZA()(),t.TgZ(7,"article",3),t.YNc(8,U,34,12,"section",0),t.YNc(9,E,18,6,"form",4),t.qZA(),t.YNc(10,B,2,2,"section",5),t.ALo(11,"async"),t.BQk()),2&a){const e=n.ngIf,o=t.oxw();t.xp6(1),t.Q6J("title","\u{1f3af} TARGET:")("text",e.title),t.xp6(1),t.Q6J("routerLink",t.VKq(8,L,e.goal_id)),t.xp6(6),t.Q6J("ngIf",!o.editTarget),t.xp6(1),t.Q6J("ngIf",o.editTarget),t.xp6(1),t.Q6J("ngIf",t.lcZ(11,6,o.targetTasksList$))}}class p{constructor(n,e,o,s){this.store$=n,this.title=e,this.activatedRoute=o,this.notificationService=s,this.editTarget=!1,this.activeTarget$=this.store$.select(y.w.selectActiveTarget),this.targetTasksList$=this.store$.select(Z.N.selectTargetTasksList),this.title.setTitle("Target Details - GoalsApp")}ngOnInit(){this.activatedRoute.params.subscribe(n=>{const e=n.id;this.loadTargetId(e),this.loadTargetTasks(e)})}ngOnDestroy(){this.store$.dispatch(k.C.clear())}loadTargetId(n){this.store$.dispatch(T.R.getActiveTarget({targetId:n}))}loadTargetTasks(n){this.store$.dispatch(T.R.getActiveTargetTasks({targetId:n}))}editTargetFormHandler(n){if(n.invalid)return void this.notificationService.showErrorNotification("Invalid Form Fields!");const e=n.value;this.store$.dispatch(T.R.updateActiveTarget({targetId:e.id,changedTarget:e})),this.editTarget=!1}deleteTarget(n,e){confirm("Are You Sure? All Target Tasks Also will be deleted!")&&this.store$.dispatch(T.R.deleteActiveTarget({targetId:n,goalId:e}))}updateTargetProgress(n,e){const o=n.operation;let s=Number(e.total_completed_tasks),g=e.total_tasks;switch(o){case f.B.ADDED:g++;break;case f.B.UPDATED:s--;break;case f.B.REMOVED:n.isDeletedTaskCompleted&&s--,g--;break;case f.B.COMPLETED:s++}const x=s/g*100,j={...e,progress:x,total_tasks:g,total_completed_tasks:s};this.store$.dispatch(A.N.updateActiveTargetSuccess({target:j})),this.store$.dispatch(b.Y.clear())}}p.\u0275fac=function(n){return new(n||p)(t.Y36(D.yh),t.Y36(M.Dx),t.Y36(u.gz),t.Y36(C.g))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-target-details"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"title","text"],[1,"hidden","md:flex","m-5","gap-3","items-center","dark:hover:bg-gray-800","px-3","py-2","cursor-pointer","border","rounded",3,"routerLink"],[1,"bg-white","dark:bg-gray-800","relative","p-4","m-1","md:m-5","md:p-5","border","rounded"],["class","bg-white dark:bg-gray-800 mt-5 space-y-6 md:shadow md:p-10 md:rounded-lg\n            dark:shadow-gray-500",3,"ngSubmit",4,"ngIf"],["class","mb-40 md:my-5",4,"ngIf"],[1,"absolute","top-3","right-3"],["mat-icon-button","","aria-label","Target menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"my-5"],[1,"w-full","mx-auto","flex","justify-between"],[1,"w-full","mx-auto","border","dark:border-gray-200","bg-white","dark:bg-gray-600"],[1,"text-center","text-center","bg-green-600","dark:bg-green-800","text-gray-900","dark:text-gray-300"],[1,"p-5","border","bg-gray-50","dark:bg-gray-700",3,"innerHTML"],[1,"py-5","flex","flex-wrap","justify-start"],[1,"flex","items-center"],[1,"mb-[9px]","text-xl"],[1,"bg-white","dark:bg-gray-800","mt-5","space-y-6","md:shadow","md:p-10","md:rounded-lg","dark:shadow-gray-500",3,"ngSubmit"],["editTargetForm","ngForm"],["type","hidden","name","id","ngModel","",3,"ngModel"],[1,"flex","align-center","border","border-slate-600","rounded"],["type","text","name","title","placeholder","Title...","minlength","5",1,"w-full","py-2","px-3","dark:bg-gray-800","dark:focus:bg-gray-900","dark:active:bg-gray-700",3,"ngModel"],["title","ngModel"],["name","description","placeholder","Target Description...",1,"w-full","min-h-[175px]","py-2","px-3","dark:bg-gray-800","dark:focus:bg-gray-900","dark:active:bg-gray-700",3,"ngModel"],["description","ngModel"],["type","submit",1,"relative","btn-primary","dark:btn-primary-dark"],["type","button",1,"py-2","px-3","ml-3","border","shadow","dark:shadow-gray-300","rounded","dark:active:bg-gray-700",3,"click"],["class","text-sm text-red-600",4,"ngIf"],[1,"text-sm","text-red-600"],[1,"mb-40","md:my-5"],[3,"targetId","tasksList","taskEvent"]],template:function(n,e){1&n&&(t.YNc(0,$,12,10,"ng-container",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,e.activeTarget$))},dependencies:[m.O5,c._Y,c.Fj,c.JJ,c.JL,c.wO,c.On,c.F,v.Hw,_.VK,_.OP,_.p6,u.rH,I.T,J.f,m.Ov,m.uU],data:{animation:[(0,i.X$)("fadeInOut",[(0,i.SB)("void",(0,i.oB)({transform:"scaleY(0.01)",opacity:0})),(0,i.eR)("void <=> *",(0,i.jt)(800))]),(0,i.X$)("fadeTargetInOut",[(0,i.SB)("void",(0,i.oB)({transform:"scaleY(0.01)",opacity:0})),(0,i.eR)("void <=> *",(0,i.jt)(400))])]}});const O=[{path:":id",component:p}];class l{}l.\u0275fac=function(n){return new(n||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[u.Bz.forChild(O),u.Bz]});var S=r(529),R=r(990),H=r(2751);class d{}d.\u0275fac=function(n){return new(n||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({imports:[m.ez,S.JF,c.u5,v.Ps,_.Tx,l,R.m,H.p]})}}]);